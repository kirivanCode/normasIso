---
import Header from '../components/Header.astro';
import "../styles/global.css";
---

<!DOCTYPE html>
<html lang="es" class="dark scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Aplicación web con IA sobre normas ISO - por Iván Sierra" />
    <meta name="author" content="Iván Sierra" />
    <meta name="keywords" content="IA, ISO, normas, tecnología, desarrollo web, Astro, Tailwind" />
    <meta name="theme-color" content="#121212" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Onest:wght@400;700&display=swap" />
    <title>Normas ISO con IA — Iván Sierra</title>
  </head>

  <body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-300 ease-in-out">
    <Header />

    <main class="flex-1 px-4 sm:px-8 md:px-12 lg:px-24 py-8 max-w-7xl mx-auto">
      <slot />
    </main>

    <footer class="mt-auto bg-gray-200 dark:bg-gray-800 text-center py-4 text-sm text-gray-600 dark:text-gray-400">
      © 2025 Iván Sierra • Astro • Tailwind CSS 
    </footer>

    <script>
      // Persistir tema en localStorage
      const html = document.documentElement;
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "light") {
        html.classList.remove("dark");
      } else {
        html.classList.add("dark");
      }
    </script>
  </body>
</html>

<style is:global>
  :root {
    color-scheme: dark;
  }

  html {
    font-family: "Onest", system-ui, sans-serif;
  }

  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
  }
</style>

<script>
  const themeToggleBtn = document.getElementById("theme-toggle");
  const html = document.documentElement;

  // Aplica el tema guardado al cargar
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme) {
    html.classList.toggle("dark", savedTheme === "dark");
  } else {
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    html.classList.toggle("dark", prefersDark);
    localStorage.setItem("theme", prefersDark ? "dark" : "light");
  }

  // Cambiar el tema al hacer clic
  themeToggleBtn?.addEventListener("click", () => {
    const isDark = html.classList.toggle("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  });
</script>